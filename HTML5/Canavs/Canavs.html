<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas width="400px" height="400px"></canvas>
    <canvas width="100px" height="100px" >
    </canvas>
    <img src="../Canavs/xiaolian.jpg" alt="">

   
         <!-- Canvas 最早在apple的safari 1.3当中引入的 -->
         <!-- ie9之前的浏览器不支持Canvas -->
         <!-- 写宽高的时候,不需要写px,如果写的话需要加上引号 -->
         <!-- 上下文对象相当于我们的画笔 -->
         <!-- 接下来的操作都是基于上下文对象的 -->
         <!-- Canvas对象和上下文对象(通过getContext('2d')方法获取到的CanvasRendingContext2D对象) -->
    <script>
        // // 1.ctx.moveTo(x,y);  移动到x,y坐标点
        // // 2.ctx.lineTo(x,y);  从当前点绘制直线到x,y点
        // // 3.ctx.stroke();     描边
        // // 4.ctx.lineWidth = 20; 设置线段宽度
        // // 5.ctx.closePath();     闭合当前路径,和回到起始点的区别
        // // 6.ctx.fill();        填充
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // // 为什么不是3d呢,当你想要绘制一个3D画像,我们需要用到webgl方法
        // ctx.lineWidth = 10;
        // //让这根笔移动到了100,100的位置
        // ctx.moveTo(100,100);
        // ctx.lineTo(200,100);
        // ctx.lineTo(200,200);
        // ctx.closePath();
        // // ctx.lineTo(100,200);
        // // ctx.lineTo(100,100);
        // ctx.strokeStyle = "red";
        // ctx.stroke();
        // //填充的时候颜色默认是黑
        // ctx.fillStyle = "yellow";
        // ctx.fill();
        // //这种方法产生的图形是可以保存的图片样式,保存之后发生背景是黑的,但是我们看是白的



        //重点
        // 1.fill和stroke方法都是作用在当前的所有子路径
        // 2.完成一条路径后要重新开始另一条路径的时候,必须使用beginPath();方法,beginPath()开始子路径的一个新的集合


        //矩形
        // 前两个参数是原点,后面两个是宽高
        // 1.ctx.rect(x,y,dx,dy);
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.rect(100,100,200,100);
        // ctx.fill();
        // 2.ctx.fillRect(x,y,dx,dy);    // 这个方法把第一个方法和 ctx.fill();结合起来了
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.fillRect(100,100,200,100);
        // 3.ctx.strokeRect(x,y,dx,dy);  // 这个方法把第一个方法和 ctx.stroke();结合起来
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.strokeRect(100,100,200,100);



        //擦除当前区域
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.fillRect(100,100,200,100);
        // ctx.clearRect(100,100,200,50);
        
        // 矩形方块落地
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.fillStyle = "yellow";
        // var y = 0;
        // function drawRect(y) {
        //     ctx.fillRect(100,y,200,100);
        // }
        // var timer = setInterval(function () {
        //     ctx.clearRect(100,0,200,300);
        //     drawRect(y);
        //     y+=10;
        //     if(y > 300) {
        //         clearInterval(timer);
        //     }
        // },100);



        //弧形
        // 1.arc(x,y,r,起始弧度,结束弧度,弧形的方向)
        // 2.(0顺时针,1顺时针)
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.strokeStyle = "pink";
        // ctx.arc(150,150,100,0,Math.PI/180 * 90,0);
        // ctx.stroke();

        // 练习1
        // 画圆
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.strokeStyle = "pink";
        // ctx.arc(150,150,100,0,Math.PI/180 * 360,0);
        // ctx.stroke();


        // 画四分之一圆
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.strokeStyle = "pink";
        // ctx.moveTo(150,150);
        // ctx.lineTo(250,150);
        // ctx.arc(150,150,100,0,-Math.PI/180 * 45,1);
        // ctx.closePath();
        // ctx.stroke();

        
        // 画四分之三圆
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.strokeStyle = "pink";
        // ctx.moveTo(150,150);
        // ctx.lineTo(250,150);
        // ctx.arc(150,150,100,0,-Math.PI/180 * 45,0);
        // ctx.closePath();
        // ctx.stroke();


        // 圆角
        // 1.ctx.arcTO(x1,y1,x2,y2,r)
        // 2.绘制的弧线与当前点和x1,y1连线,x1,y1和x2,y2都相切;
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.moveTo(150,150);
        // ctx.arcTo(250,150,250,250,50);
        // ctx.stroke();


        // 绘制圆角矩形
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.moveTo(100,50);
        // ctx.arcTo(200,100,200,200,30);
        // ctx.arcTo(200,200,100,200,30);
        // ctx.arcTo(100,200,100,100,30);
        // ctx.arcTo(100,100,200,100,30);
        // ctx.stroke();

        //贝塞尔曲线    //svg再讲
        // 1.quadraticCurveTo(x1,y1,ex,ey)二次贝塞尔曲线
        // x1,y1控制点
        // ex,ey结束点
        // 2.bezierCurveTo(x1,y1,x2,y2,ex,ey)三次贝塞尔曲线
        // x1,y1,x2,y2控制点
        // ex,ey结束点



        // 坐标轴旋转
        // 1.translate(dx,dy)   重新映射画布上的(0,0)位置
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.translate(150,150);
        // ctx.rect(50,50,200,100);
        // ctx.stroke();
        
        
        // 2.scale(sx,sy)  缩放当前绘图
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.rect(50,50,200,100);
        // ctx.scale(50,50);
        // ctx.stroke();
        
        
        // 3.rotate(Math.PI)  旋转当前的绘图     旋转的是画布
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.rotate(Math.PI/180*30);
        // ctx.rect(100,100,100,50);
        // ctx.stroke();
        // 4.save() restore()  保存当前图像状态的一份拷贝,从栈中弹出存储的图形状态并恢复
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.rect(50,50,200,100);
        // ctx.save();
        // ctx.rotate(Math.PI/180*30);
        // ctx.rect(100,100,200,100);
        // ctx.restore();
        // ctx.rect(200,200,30,30);
        // ctx.stroke();
        // 5.seTransform(a,b,c,d,e,f)先重置再变换
        // 6.teansform(a,b,c,d,e,f)在之前的基础上变换




        //填充图案
        // 1.createPattern(image,"repeat|repeat-x|repeat-y|no-repeat");
        // 2.img元素(image对象),canvas元素,video元素(有图形的)
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var canvas1 = document.getElementsByTagName("canvas")[1];
        // var ctx = canvas.getContext("2d");
        // var ctx1 = canvas1.getContext("2d");
        // ctx.beginPath();
        // ctx1.beginPath();
        // ctx1.fillRect(0,0,50,50);
        // //把小的canvas作为图片传进去
        // ctx.fillStyle = ctx1.createPattern(canvas1,"repeat-y");
        // ctx.fillRect(0,0,400,400);


        // 练习
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var canvas1 = document.getElementsByTagName("canvas")[1];
        // var img = document.getElementsByTagName("img")[0];
        // var ctx = canvas.getContext("2d");
        // var ctx1 = canvas1.getContext("2d");
        // ctx.beginPath();
        // ctx1.beginPath();
        // img.style.width = "400px";
        // img.style.height = "400px";
        // img.onload = function () {
        //     ctx.fillStyle = ctx1.createPattern(img,"no-repeat");
        //     ctx.fillRect(0,0,400,400);
        // }


        //渐变
        // 1.createLinearGradient(x1,y1,x2,y2); 线性渐变,必须在填充渐变的区域里定义渐变,否则,没有效果
        // 2.createRadialGradient(x1,y1,r1,x2,y2,r2); 径向渐变    x1,y,x2,y2最好是实现成为同心圆
        // p相当于百分比
        // 3.addColorStop(p,color);

        // 线性渐变
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // var bg = ctx.createLinearGradient(0,0,0,400);
        // bg.addColorStop(0,"red");
        // bg.addColorStop(0.5,"yellow");
        // bg.addColorStop(1,"green");
        // ctx.fillStyle = bg;
        // ctx.fillRect(0,0,400,400);

        // 径向渐变
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // var bg = ctx.createRadialGradient(200,200,20,200,200,40);
        // bg.addColorStop(0,"red");
        // bg.addColorStop(0.6,"orange");
        // bg.addColorStop(1,"#fff");
        // ctx.fillStyle = bg;
        // ctx.fillRect(0,0,400,400);


        //阴影
        // 1.ctx.shadowColor
        // 2.ctx.shadowOffsetX  偏移到哪里
        // 3.ctx.shadowOffsetY  偏移到哪里
        // 4.ctx.shadowBulr   模糊程度
        // 注: 这里的偏移量不受坐标系变换的影响    永远跟着方块动
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.shadowColor = "red";
        // // ctx.translate(200,200);
        // // ctx.rotate(Math.PI/180*30);
        // ctx.shadowOffsetX = "10";
        // ctx.shadowOffsetY = "10";
        // ctx.shadowBlur = 10;
        // ctx.fillRect(100,100,100,50);


        // 文本
        // 1.fillText()
        // 2.stroke Text()
        // 3.measureText('hello world'); 了解    //检查宽度
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.strokeStyle = "red";
        // ctx.font = '50px sans-serif';
        // ctx.strokeText("width:"+ctx.measureText("jingrui").width,10,50);
        // 实心
        // ctx.fillText("jingrui",100,100);
        // 空心
        // ctx.strokeText("jingrui",100,100);


        //线段样式
        // 1.lineCap
        // 2.lineJoin
        // 3.ctx.miterLimit  当linejoin是miter时,用于控制斜接部分的长度,如果斜接长度超过miterLimit的值,变成bevel
        //注：实际运算是大于limit*linewidth/2的值
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.lineWidth = 20;
        // ctx.lineJoin = "miter";
        // ctx.miterLimit = 10;
        // ctx.moveTo(100,100);
        // ctx.lineTo(100,200);
        // ctx.lineTo(120,100);
        // ctx.closePath();
        // ctx.stroke();




        //裁剪
        // 1.ctx.clip();   当前路径外的区域不再绘制
        // 注:可以在clip之前用save()方法保存,后续用restore()方法恢复
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.arc(200,200,50,0,Math.PI/180 * 360);
        // ctx.stroke();
        // ctx.save();
        // ctx.clip();
        // ctx.strokeRect(180,180,100,100);
        // ctx.restore();
        // ctx.strokeRect(0,0,200,100);


        
        //合成
        // 1.ctx.globalCompositeOperation = "source-over";
        // 新像素和原像素的合并方式
        // 2.11种值,默认source-over  w3c标准
        // 3.常用source-over,destination-over,copy
        // source-over
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.beginPath();
        // ctx.fillStyle = "yellow";
        // ctx.fillRect(100,100,200,200);
        // // ctx.globalCompositeOperation = "source-over";
        // // ctx.globalCompositeOperation = "source-atop";
        // // ctx.globalCompositeOperation = "source-in";
        // // ctx.globalCompositeOperation = "source-out";
        // // ctx.globalCompositeOperation = "destination-over";
        // // ctx.globalCompositeOperation = "destination-atop";
        // // ctx.globalCompositeOperation = "destination-in";
        // // ctx.globalCompositeOperation = "destination-out";
        // // ctx.globalCompositeOperation = "copy";
        // // ctx.globalCompositeOperation = "lighter";
        // // ctx.globalCompositeOperation = "xor";
        // ctx.fillStyle = "red";
        // ctx.arc(120,120,60,0,Math.PI/180*360);
        // ctx.fill();


        // 全局透明度
        // ctx.globalAlpha = "0.5";


        //canvas一般用大画布塞到小相框里面


        //绘制图片
        // 1.ctx.drawimage();
        // 第一个参数是img(image,canvas,video)   注:load
        // 2. 3个参数(x,y)
        // 起始点坐标
        // 3. 5个参数(x,y,dx,dy)
        // 起始点坐标及图片所存区域的宽高
        // 4. 9个参数
        // 前四个为所绘制目标元素的起始点和宽高
        // 后四个为canvas绘制的起始点和大小
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var canvas1 = document.getElementsByTagName("canvas")[1];
        // var img = document.getElementsByTagName("img")[0];
        // var ctx = canvas.getContext("2d");
        // var ctx1 = canvas.getContext("2d");
        // img.onload = function () {
        //     // ctx.drawImage(img,0,0);
        //     // ctx.drawImage(img,0,0,100,100);
        //     // ctx.drawImage(img,0,0,400,400,200,200,200,200);
        // }


        //将canvas内容导出
        // 1.canvas.toDateURL();  是canvas自身的方法不是上下文对象
        // 2.将canvas的内容抽取成一张图片,base64编码格式    注:同源策略的限制
        // 3.将canvas的内容放入img元素里
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var canvas1 = document.getElementsByTagName("canvas")[1];
        // var img = document.getElementsByTagName("img")[0];
        // var ctx = canvas.getContext("2d");
        // var ctx1 = canvas.getContext("2d");
        // ctx1.fillRect(0,0,50,50);
        // console.log(canvas.toDataURL());



        //受同源的影响,不在一个路径下引不了
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var canvas1 = document.getElementsByTagName("canvas")[1];
        // var img = document.getElementsByTagName("img")[0];
        // var ctx = canvas.getContext("2d");
        // var ctx1 = canvas.getContext("2d");
        // img.onload = function () {
        //     ctx.drawImage(img,0,0,400,400);
        //     console.log(canvas.toDataURL());
        // }


        // 3.将canvas的内容放入img元素里
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var canvas1 = document.getElementsByTagName("canvas")[1];
        // var img = document.getElementsByTagName("img")[0];
        // var ctx = canvas.getContext("2d");
        // var ctx1 = canvas.getContext("2d");
        // ctx1.fillRect(0,0,50,50);
        // var pic = canvas.toDataURL();
        // var img1 = document.createElement("img");
        // document.body.appendChild(img1);
        // img1.src = pic;


        
        // 获取canvas像素信息
        // 1.ctx.getImageData(x,y,dx,dy);  //  同源策略
        // 2.ctx.creatImageData(w,h)      //创建新的空白imageData对象
        // 3.ctx.putImageData(ImageData,x,y)  //将图像数据放回画布上
        //练习
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var canvas1 = document.getElementsByTagName("canvas")[1];
        // var img = document.getElementsByTagName("img")[0];
        // var ctx = canvas.getContext("2d");
        // var ctx1 = canvas.getContext("2d");
        // img.onload = function () {
        //     ctx.fillRect(0,0,100,100);
        //     var picsrc = canvas.toDataURL();
        //     var img1 = document.createElement("img");
        //     document.body.appendChild(img1);
        //     console.log(ctx.getImageData(0,0,500,500));
        // }


        // RGBA值
        // R - 红色(0-255)
        // G - 绿色(0-255)
        // B - 蓝色(0-255)
        // A-alpha 通道(0-255; 0 是透明的, 255是完全可见的)
        //练习把一个黑的变成灰色
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.fillRect(0,0,50,50);
        // var pic = ctx.getImageData(0,0,50,50);
        // var row = pic.width;
        // var col = pic.height;
        // var data = pic.data;
        // for(var i = 0; i < row; i ++) {
        //     var c = i * col * 4;
        //     for(var j = 0; j < col; j ++) {
        //         data[c + j * 4 + 3] = 100;
        //     }
        // }
        // ctx.putImageData(pic,50,50);



        // 命中检测
        // 1.ctx.isPointPath(x,y);  检测是否在区域内,chrome与safari的区别
        // 2.ctx.isPointStroke(x,y);   检测是否在线上
        // 3.还可以通过检测当前点的像素值,如果为透明,则该点不再路径上
        // var canvas = document.getElementsByTagName("canvas")[0];
        // var ctx = canvas.getContext("2d");
        // ctx.rect(100,100,200,200);
        // // console.log(ctx.isPointInPath(150,150));
        // // console.log(ctx.isPointInStroke(100,200));


        
    </script>
</body>
</html>